CREATE TABLE `student` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_library` int(11) NOT NULL,
  `name` varchar(45) NOT NULL,
  `surname` varchar(45) NOT NULL,
  `email` varchar(45) NOT NULL,
  `phone` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `id_idx` (`id_library`),
  CONSTRAINT `id` FOREIGN KEY (`id_library`) REFERENCES `library` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1

CREATE TABLE `book` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_library` int(11) NOT NULL,
  `author` varchar(35) NOT NULL,
  `name` varchar(35) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `id_library_idx` (`id_library`),
  CONSTRAINT `id_library` FOREIGN KEY (`id_library`) REFERENCES `library` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=latin1s

CREATE TABLE `library` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `phone` varchar(13) NOT NULL,
  `email` varchar(35) NOT NULL,
  `address` varchar(35) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1

CREATE TABLE `ref_book_student` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_student` int(11) NOT NULL,
  `id_book` int(11) NOT NULL,
  `taken` date NOT NULL,
  `returning` date NOT NULL,
  `returned` tinyint(4) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `id_student_idx` (`id_student`),
  KEY `id_book_idx` (`id_book`),
  CONSTRAINT `id_book` FOREIGN KEY (`id_book`) REFERENCES `book` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `id_student` FOREIGN KEY (`id_student`) REFERENCES `student` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=35 DEFAULT CHARSET=latin1